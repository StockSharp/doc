# Настройки коннектора Plaza II

Механизм взаимодействия показан на рисунке: 

![PlazaTrader](../../../../../images/plazatrader.png)

Для использования роботом Торговой платформы [Plaza II](https://moex.com/s444) на свой компьютер необходимо установить клиентский дистрибутив шлюза Plaza II. Его можно скачать с FTP\-сервера РТС. Шлюз можно установить как обыкновенную программу для Windows, либо как [Служба Windows](https://ru.wikipedia.org/wiki/Службы_Windows). При установке нужно учитывать разрядность системы. На FTP\-сервере выложены 32\-разрядный и 64\-разрядный дистрибутивы. 

![PlazaConnection](../../../../../images/plazaconnection.png)

**Основные настройки подключения к Plaza II**

- Название приложение — идентификатор подключения, состоящий из произвольной комбинации цифр и\/или букв латинского алфавита. Для каждого созданного подключения должен использоваться уникальный идентификатор 
- Использовать ордерлог — опция, позволяющая включать использование ордерлога для построения стаканов и получения тиков. 
- Глубина стаканов ФОРТС — в зависимости от подключенных потоков **Plaza II** к Вашему **Plaza II****Логину** нужно выбрать соответствующую глубину. Опция не учитывается если включено использование ордерлога. 
- Только системные сделки — выводить только системные сделки. 

**Подключение к роутеру**

- Коннектор **Plaza II** подключается к роутеру шлюза **Plaza II**. Можно использовать как встроенный роутер, так и внешний. 
- Если вы не планируете подключать несколько приложений к одному роутеру, советуем использовать встроенный роутер. 

**Использование встроенного роутера**

- Для использования встроенного роутера, необходимо включить соответствующую опцию в настройках подключеия к **Plaza II**. 
- При этом нужно будет ввести логин, пароль от вашего логина **Plaza II**. 
- Встроенный роутер по умолчанию настроен на соединение с московскими production\-серверами. Если вам требуется использовать другие серверы, отредактируйте соответствующим образом их список. Первая строчка в таблице всегда соответствует «дефолтному» серверу, все остальные – «директным» 

**Использование встроенного роутера**

- Для этого необходимо установить клиентский дистрибутив шлюза **Plaza II**: 

  Версия для 32 битной операционной системы: ftp:\/\/ftp.micex.com\/pub\/FORTS\/Plaza2\/P2\_CGate1.16.6\_32\_M1.exe

  Версия для 64 битной операционной системы: ftp:\/\/ftp.micex.com\/pub\/FORTS\/Plaza2\/P2\_CGate1.16.6\_64\_M1.exe
- Подключение может быть осуществленно как к локальному роутеру, так и к удаленному. 
- Если нужно подключиться к одному роутеру из двух и более приложений, у каждого приложения Название приложения нужно указать уникальным. 
- Если вы подключаетесь к роутеру, установленному на локальной машине, в поле Address необходимо ввести 127.0.0.1:4001
- При подключении к роутеру, установленному на удаленной машине, необходимо ввести следующее: 
- Address — IP и порт удаленного роутера 
- Пароль: пароль, который будет вписан в настройки роутера на удаленной машине 

**Настройка роутера на удаленном компьютере**

- Для подключения к роутеру, установленному на другой машине, необходимо внести дополнительные изменения в конфигурацию роутера. По умолчанию, конфигурация роутера хранится в файле client\_router.ini в директории, куда был установлен роутер. Чтобы иметь возможность подключаться к роутеру удаленно, необходимо указать имена приложений, с помощью которых будет выполняться удаленное подключение и пароль для каждого из имен, для этого в файл конфигурации необходимо добавить следующие строки: 

  \[AS:Local\]

  префикс\_0\=пароль

  префикс\_1\=пароль

  префикс\_2\=пароль

  префикс\_send\=пароль
- Т.к. одно приложение может одновременно использовать несколько подключений к роутеру, то к имени, указанному в “Название приложение” добавляется его номер, таким образом, соединения именуются как {префикс\_номер}, поэтому в конфигурации роутера необходимо указать все названия имен с учетом их номеров. 
- После настройки роутера, необходимо дополнительно указать пароль для ATAS коннектора, который был сохранен в файле конфигурации роутера. Для указания сетевого пароля используется поле LocalPassword 

**Логин**, **Пароль** и **настройки соединения** предоставляются брокером. Для получения API доступа рекомендуется обратиться к брокеру.
