# Разреженный стакан

Разреженный стакан заявок — это представление стакана, в котором отображаются все возможные уровни цен, включая те, по которым в данный момент нет активных заявок. Такой подход позволяет трейдерам визуально оценивать "гэпы" между заявками, то есть уровни цен, на которых отсутствуют заявки на покупку или продажу, давая представление о потенциальных уровнях сопротивления или поддержки.

## Зачем нужен разреженный стакан
Использование разреженного стакана заявок имеет несколько преимуществ:

1. Визуализация гэпов: Легче идентифицировать ценовые уровни с отсутствующими заявками, что может указывать на потенциальные точки входа или выхода.
2. Анализ ликвидности: Наглядное представление о распределении заявок помогает оценить ликвидность инструмента на разных уровнях цен.
3. Стратегическое планирование: Понимание структуры стакана позволяет более точно планировать торговые операции, учитывая потенциальные "пустоты" в ликвидности.

## Создание разреженного стакана

Для работы со сгруппированным стаканом заявок необходимо сначала настроить получение через [подписки](OrderBook_Subscription.md), а затем вызвать метод-расширение [Group](xref:StockSharp.Messages.Extensions.Sparse). Метод принимает следующие параметры:

- `priceRange` - это разница в цене, до которой нужно расширять уровни.
- `priceStep` - это шаг цены у торгового инструмента. Он используется в том случае, если priceRange имеет меньшую точность по ценовым уровням, чем priceStep, и требуется округлить полученные цены до шага цены инструмента.

```cs
// Предполагается, что orderBook - это объект IOrderBookMessage, полученный из StockSharp
var sparseDepth = orderBook.Sparse(priceRange, priceStep);

// Теперь sparseDepth содержит представление исходного стакана заявок,
// где учтены все возможные уровни цен, включая те, по которым отсутствуют заявки.
```

В этом примере [Group](xref:StockSharp.Messages.Extensions.Sparse) используется для создания разреженного стакана заявок, что позволяет отображать все уровни цен, даже если по некоторым из них нет активных заявок. Это может быть полезно для анализа потенциальных "пустых" уровней, которые могут служить уровнями поддержки или сопротивления.